---
layout:     post
title:      数字壳逆向
subtitle:   
date:       2019-07-29
author:     101142ts
header-img: img/post-bg-hacker.jpg
catalog: true
tags: 
    - 加壳 
    - 动态调试
    - 360
---

样本是从f-droid上找到 [这里](https://f-droid.org/zh_Hans/packages/com.perflyst.twire/)

使用数字网页版进行加固，打开后，只剩下数字的几个壳类。加固的时间是 7.26

将加壳前的AndroidManifest.xml与之后进行对比，发现就改了一个地方，从

> android:name="com.perflyst.twire.TwireApplication"

变成了

> android:name="com.stub.StubApp"

android:name 的作用是：这个name所指定的类必须是 **Application** 类的子类，当应用进程启动时，这个类会在所有其他应用组件初始化前初始化。简单的说，相当于是应用的入口。

这个android:name是可以缺省的，如果没有的话，Android就用普通的 **Application** 类

所以，数字在加壳后替换了android:name相当于是将应用的入口点改变了，先启动com.stub.StubApp做一些自己的事。

AndroidManifest.xml中有个标签，里面声明了**android.intent.action.MAIN**和**android.intent.category.LAUNCHER**。关于这两个关键词的具体含义，可以看 [这里](https://blog.csdn.net/Lindroid20/article/details/51993247)

从这里可以看出com.perflyst.twire.activities.StartUpActivity是应用的第一个Activity,因此在使用jeb调试的时候，我们应该在com.stub.StubApp的onCreate处下断点。然后在命令行输入

> adb shell am start -D -n com.perflyst.twire/com.perflyst.twire.activities.StartUpActivity

使用jeb附加在启动的应用上，即可开始调试。

1858784996(6ECACEE4h)