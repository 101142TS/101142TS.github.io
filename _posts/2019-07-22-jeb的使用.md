---
layout:     post
title:      学习JEB
subtitle:   Part 0
date:       2019-07-22
author:     101142ts
header-img: img/post-bg-hacker.jpg
catalog: true
tags: JEB
---

# ubuntu下
其实一开始是想学IDA，然后用IDA来调试安卓应用的，但是后来觉得实验室既然买了JEB，而JEB又有专门的Android Decompiler + Android Debuggers，不用白不用，就决定学习JEB。

由于我的ubuntu上需要编译Android4.4，而Android4.4只能用jdk1.6来编译，而JEB需要使用jdk1.8，所以需要下载jdk1.8，我是将其移动到/usr/lib/jvm下，然后修改jeb_linux.sh，将原始的

```bash
# Prefer local JRE
JAVA=bin/runtime/bin/java
if [ ! -f "$JAVA" ]; then

  # Prefer a JDK over a JRE
  if [ -z "$JAVA_HOME" ]; then
    JAVA=`which java`
  else
    JAVA=$JAVA_HOME/bin/java
  fi

  # Note: If the Java path generation does not yield a correct result, manually set
  # the JAVA variable (defined above) to a correct value
  if [ ! -f "$JAVA" ]; then
    echo "JEB requires a Java JRE or JDK version 8 or above. Recommended version: Java 8.191"
    echo "It is also recommended to set JAVA_HOME and JRE_HOME environment variables to point to your JDK"
    exit -1
  fi
fi
```
注释掉，变成
```bash
JAVA=/usr/lib/jvm/jdk1.8.0_221/bin/java
```
就能打开了。但很奇怪的是如果我想要动态调试，这玩意就一直卡在收集调试器信息那里，google了一下，无果。服了，还是在mac下进行吧

# mac下

动态调试的时候，如果你想调的是onCreate的话，就必须先让应用以被调试的方式启动，然后再让jeb附加上去。

首先，先在命令行以如下方式启动MainActivity，这个时候应用会卡在waiting for Debugger处

```bash
adb shell am start -D -S -n z.sample0/.MainActivity
adb shell am start com.perflyst.twire/.activities.main.MyChannelsActivity
```
之后在想调试的地方下断点。

点击jeb中的 调试-开始，选择好对应的机器和进程，如果想调试native代码的话，勾选allow children debuggers即可开始调试。